----------------------------------------------------------------------
--
-- Honmokデータベース設定
--
--   Date   : 2014/03/10
--   Author : Koji HIJIKURO <koji0903@gmail.com>
--
----------------------------------------------------------------------

■ データベースの作成（最初の一回のみ）

　　　※既存データがあった場合は、すべて削除されるので注意！

1. コマンドプロンプトを開く
2. データベースおよびテーブルの作成
    % mysql -u root -p < ${HONMOK}/db/HonmokDB_create.sql
3. テストデータを挿入（任意）
    % mysql -u root -p honmokdb < ${HONMOK}/db/HonmokDB_TestDataInsert.sql

[耐久テスト用] (実行に時間がかかるので注意)
    # ユーザを9998人追加
    % mysql -u root -p honmokdb < ${HONMOK}/db/AddUser9998.sql
    # ユーザを9998冊追加
    % mysql -u root -p honmokdb < ${HONMOK}/db/AddBook9998.sql

■ 実行確認
 
1. データベース確認

 % show databases;
 を実行して、Databaseテーブルに"honmokdb"が入っていることを確認。

2. テーブル確認

mysql> desc users;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| uid        | int(11)     | NO   | PRI | NULL    | auto_increment |
| userNo     | varchar(20) | NO   | UNI | NULL    |                |
| uname      | varchar(50) | NO   |     | NULL    |                |
| address    | varchar(50) | NO   |     | NULL    |                |
| tel        | varchar(30) | NO   |     | NULL    |                |
| limitFlag  | tinyint(1)  | NO   |     | 0       |                |
| deleteFlag | tinyint(1)  | NO   |     | 0       |                |
+------------+-------------+------+-----+---------+----------------+

%mysql> desc books;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| bid        | int(11)     | NO   | PRI | NULL    | auto_increment |
| isbn       | varchar(20) | YES  |     | NULL    |                |
| bname      | varchar(30) | NO   |     | NULL    |                |
| author     | varchar(30) | NO   |     | NULL    |                |
| publisher  | varchar(30) | NO   |     | NULL    |                |
| page       | int(11)     | YES  |     | NULL    |                |
| deleteFlag | tinyint(1)  | NO   |     | 0       |                |
+------------+-------------+------+-----+---------+----------------+

%mysql> desc libraryBooks;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| lbid       | int(11)     | NO   | PRI | NULL    | auto_increment |
| bid        | int(11)     | NO   |     | NULL    |                |
| bookNo     | varchar(20) | NO   | UNI | NULL    |                |
| deleteFlag | tinyint(1)  | NO   |     | 0       |                |
+------------+-------------+------+-----+---------+----------------+

%mysql> desc circulations;
+------------+------------+------+-----+---------+----------------+
| Field      | Type       | Null | Key | Default | Extra          |
+------------+------------+------+-----+---------+----------------+
| cid        | int(11)    | NO   | PRI | NULL    | auto_increment |
| issueDay   | datetime   | NO   |     | NULL    |                |
| returnDay  | datetime   | YES  |     | NULL    |                |
| uid        | int(11)    | NO   |     | NULL    |                |
| lbid       | int(11)    | NO   |     | NULL    |                |
| term       | int(11)    | YES  |     | 7       |                |
| deleteFlag | tinyint(1) | NO   |     | 0       |                |
+------------+------------+------+-----+---------+----------------+

3. 挿入したテストデータの確認

%mysql> select * from users;
+-----+--------+--------------+---------------+----------------+-----------+------------+
| uid | userNo | uname        | address       | tel            | limitFlag | deleteFlag |
+-----+--------+--------------+---------------+----------------+-----------+------------+
|   1 | 100000 | 肥後　太郎    | 肥後123-456   | 0120-1515-3776 |         0 |      0 |
|   2 | 100001 | 大阿蘇 次郎  | 阿蘇888-456   | 0120-1515-4231 |         0 |      0 |
|   3 | 100008 | 水前寺　花子  | 水前寺888-456 | 0120-3121-9999 |         0 |      0 |
+-----+--------+--------------+---------------+----------------+-----------+------------+

%mysql> select * from books;
+-----+------+------------------------------------------------+------------+------------+------+------------+
| bid | isbn | bname                                          | author     | publisher  | page | deleteFlag |
+-----+------+------------------------------------------------+------------+------------+------+------------+
|   1 | NULL | フェイスブックをつくったザッカーバーグの仕事術              | 桑原晃弥   | 幻冬舎     | NULL |          0 |
|   2 | NULL | あなたへの伝言                                   | 高田郁     | 幻冬舎     | NULL |          0 |
|   3 | NULL | 三毛猫ホームズは階段を上る                         | 赤川次郎   | 光文社文庫 | NULL |          0 |
|   4 | NULL | 羅生門                                         | 芥川竜之介 | 帝国文学   | NULL |          0 |
+-----+------+------------------------------------------------+------------+------------+------+------------+

%mysql> select * from libraryBooks;
+------+-----+--------+------------+
| lbid | bid | bookNo | deleteFlag |
+------+-----+--------+------------+
|    1 |   1 | 200000 |          0 |
|    2 |   2 | 200001 |          0 |
|    3 |   3 | 200002 |          0 |
|    4 |   4 | 200003 |          0 |
+------+-----+--------+------------+

END